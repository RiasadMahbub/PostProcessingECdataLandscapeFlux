VPD = VPD,
#P = NF,  # Duplicate NF keys are ignored
LW_IN = LW_IN_Avg,
LW_OUT = LW_OUT_Avg,
PPFD_IN = PAR_IN_Avg,
PPFD_OUT = PAR_OUT_Avg,
SW_IN = SW_IN_Avg,
SW_OUT = SW_OUT_Avg,
SWC = SWC_1_1_1,
#TS = `TS_2_1_2/TS_2_2_2`,
#WTD = `WTD_Avg/Lvl_m_Avg`,
MO_LENGTH = L,
TAU = Tau
#USTAR = `u*/u_`
)
# Print the column FC_SSITC_TEST
View(way3_2018_data_filtered)
library(tidyverse)
directory_path <- "C:/Users/rbmahbub/Documents/RProjects/AmerifluxDataSubmission_LandscapeFlux/Data/Way3"
file_name <- "Way3 2018.csv"
file_path <- file.path(directory_path, file_name)
# Read the CSV file
way3_2018_data <- read.csv(file_path)
View(way3_2018_data)
# Load dplyr package
library(dplyr)
# Load dplyr package
library(dplyr)
# Filter columns to include only the ones you want to rename
way3_2018_data_filtered <- way3_2018_data %>%
select(
`x_70_`,
ch4_mole_fraction,
ch4_mixing_ratio,
co2_mole_fraction,
co2_mixing_ratio,
co2_flux,
ch4_flux,
h2o_mole_fraction,
h2o_mixing_ratio,
h2o_flux,
#`shf_Avg.1./shf_Avg.2./shf_Avg.3.`,
H,
LE,
#NF,  # Duplicate NF keys are ignored
H_strg,
LE_strg,
air_pressure,
RH,
sonic_temperature,
#NF,  # Duplicate NF keys are ignored
#`Needs to be derived`,  # Duplicate "Needs to be derived" are ignored
qc_co2_flux,
qc_ch4_flux,
qc_H,
qc_LE,
qc_Tau,
co2_var,
co2_strg,
ch4_strg,
u_var,
v_var,
w_var,
wind_dir,
#NF,  # Duplicate NF keys are ignored
wind_speed,
max_wind_speed,
X_z_d__L,
air_temperature,
VPD,
#NF,  # Duplicate NF keys are ignored
LW_IN_Avg,
LW_OUT_Avg,
PAR_IN_Avg,
PAR_OUT_Avg,
SW_IN_Avg,
SW_OUT_Avg,
SWC_1_1_1,
#`TS_2_1_2/TS_2_2_2`,
#`WTD_Avg/Lvl_m_Avg`,
L,
Tau
#`u*/u_`
)
# Rename the filtered columns
way3_2018_data_f1iltered <- way3_2018_data_filtered %>%
rename(
FETCH_70 = `x_70_`,
CH4 = ch4_mole_fraction,
CH4_MIXING_RATIO = ch4_mixing_ratio,
CO2 = co2_mole_fraction,
CO2_MIXING_RATIO = co2_mixing_ratio,
FC = co2_flux,
FCH4 = ch4_flux,
H2O = h2o_mole_fraction,
H2O_MIXING_RATIO = h2o_mixing_ratio,
FH2O = h2o_flux,
#G = `shf_Avg.1./shf_Avg.2./shf_Avg.3.`,
H = H,
LE = LE,
#SG = NF,  # Duplicate NF keys are ignored
SH = H_strg,
SLE = LE_strg,
PA = air_pressure,
RH = RH,
T_SONIC = sonic_temperature,
#T_SONIC_SIGMA = NF,  # Duplicate NF keys are ignored
#GPP = `Needs to be derived`,  # Duplicate "Needs to be derived" are ignored
#NEE = `Needs to be derived`,  # Duplicate "Needs to be derived" are ignored
#RECO = `Needs to be derived`,  # Duplicate "Needs to be derived" are ignored
FC_SSITC_TEST = qc_co2_flux,
FCH4_SSITC_TEST = qc_ch4_flux,
H_SSITC_TEST = qc_H,
LE_SSITC_TEST = qc_LE,
TAU_SSITC_TEST = qc_Tau,
CO2_SIGMA = co2_var,
SC = co2_strg,
SCH4 = ch4_strg,
U_SIGMA = u_var,
V_SIGMA = v_var,
W_SIGMA = w_var,
WD = wind_dir,
#WD_SIGMA = NF,  # Duplicate NF keys are ignored
WS = wind_speed,
WS_MAX = max_wind_speed,
ZL = X_z_d__L,
TA = air_temperature,
VPD = VPD,
#P = NF,  # Duplicate NF keys are ignored
LW_IN = LW_IN_Avg,
LW_OUT = LW_OUT_Avg,
PPFD_IN = PAR_IN_Avg,
PPFD_OUT = PAR_OUT_Avg,
SW_IN = SW_IN_Avg,
SW_OUT = SW_OUT_Avg,
SWC = SWC_1_1_1,
#TS = `TS_2_1_2/TS_2_2_2`,
#WTD = `WTD_Avg/Lvl_m_Avg`,
MO_LENGTH = L,
TAU = Tau
#USTAR = `u*/u_`
)
library(tidyverse)
directory_path <- "C:/Users/rbmahbub/Documents/RProjects/AmerifluxDataSubmission_LandscapeFlux/Data/Way3"
file_name <- "Way3 2018.csv"
file_path <- file.path(directory_path, file_name)
# Read the CSV file
way3_2018_data <- read.csv(file_path)
View(way3_2018_data)
# Load dplyr package
library(dplyr)
# Load dplyr package
library(dplyr)
# Filter columns to include only the ones you want to rename
way3_2018_data_filtered <- way3_2018_data %>%
select(
`x_70_`,
ch4_mole_fraction,
ch4_mixing_ratio,
co2_mole_fraction,
co2_mixing_ratio,
co2_flux,
ch4_flux,
h2o_mole_fraction,
h2o_mixing_ratio,
h2o_flux,
#`shf_Avg.1./shf_Avg.2./shf_Avg.3.`,
H,
LE,
#NF,  # Duplicate NF keys are ignored
H_strg,
LE_strg,
air_pressure,
RH,
sonic_temperature,
#NF,  # Duplicate NF keys are ignored
#`Needs to be derived`,  # Duplicate "Needs to be derived" are ignored
qc_co2_flux,
qc_ch4_flux,
qc_H,
qc_LE,
qc_Tau,
co2_var,
co2_strg,
ch4_strg,
u_var,
v_var,
w_var,
wind_dir,
#NF,  # Duplicate NF keys are ignored
wind_speed,
max_wind_speed,
X_z_d__L,
air_temperature,
VPD,
#NF,  # Duplicate NF keys are ignored
LW_IN_Avg,
LW_OUT_Avg,
PAR_IN_Avg,
PAR_OUT_Avg,
SW_IN_Avg,
SW_OUT_Avg,
SWC_1_1_1,
#`TS_2_1_2/TS_2_2_2`,
#`WTD_Avg/Lvl_m_Avg`,
L,
Tau
#`u*/u_`
)
# Rename the filtered columns
way3_2018_data_f1iltered <- way3_2018_data_filtered %>%
rename(
FETCH_70 = `x_70_`,
CH4 = ch4_mole_fraction,
CH4_MIXING_RATIO = ch4_mixing_ratio,
CO2 = co2_mole_fraction,
CO2_MIXING_RATIO = co2_mixing_ratio,
FC = co2_flux,
FCH4 = ch4_flux,
H2O = h2o_mole_fraction,
H2O_MIXING_RATIO = h2o_mixing_ratio,
FH2O = h2o_flux,
#G = `shf_Avg.1./shf_Avg.2./shf_Avg.3.`,
H = H,
LE = LE,
#SG = NF,  # Duplicate NF keys are ignored
SH = H_strg,
SLE = LE_strg,
PA = air_pressure,
RH = RH,
T_SONIC = sonic_temperature,
#T_SONIC_SIGMA = NF,  # Duplicate NF keys are ignored
#GPP = `Needs to be derived`,  # Duplicate "Needs to be derived" are ignored
#NEE = `Needs to be derived`,  # Duplicate "Needs to be derived" are ignored
#RECO = `Needs to be derived`,  # Duplicate "Needs to be derived" are ignored
FC_SSITC_TEST = qc_co2_flux,
FCH4_SSITC_TEST = qc_ch4_flux,
H_SSITC_TEST = qc_H,
LE_SSITC_TEST = qc_LE,
TAU_SSITC_TEST = qc_Tau,
CO2_SIGMA = co2_var,
SC = co2_strg,
SCH4 = ch4_strg,
U_SIGMA = u_var,
V_SIGMA = v_var,
W_SIGMA = w_var,
WD = wind_dir,
#WD_SIGMA = NF,  # Duplicate NF keys are ignored
WS = wind_speed,
WS_MAX = max_wind_speed,
ZL = X_z_d__L,
TA = air_temperature,
VPD = VPD,
#P = NF,  # Duplicate NF keys are ignored
LW_IN = LW_IN_Avg,
LW_OUT = LW_OUT_Avg,
PPFD_IN = PAR_IN_Avg,
PPFD_OUT = PAR_OUT_Avg,
SW_IN = SW_IN_Avg,
SW_OUT = SW_OUT_Avg,
SWC = SWC_1_1_1,
#TS = `TS_2_1_2/TS_2_2_2`,
#WTD = `WTD_Avg/Lvl_m_Avg`,
MO_LENGTH = L,
TAU = Tau
#USTAR = `u*/u_`
)
# Print the column FC_SSITC_TEST
View(way3_2018_data_filtered)
# Load necessary library
library(lubridate)
# Set the directory path and file name
directory_path <- "C:/Users/rbmahbub/Documents/RProjects/AmerifluxDataSubmission_LandscapeFlux/Data/Way3"
file_name <- "Way3 2018.csv"
file_path <- file.path(directory_path, file_name)
# Read the CSV file
way3_2018_data <- read.csv(file_path)
# Create TIMESTAMP_START and TIMESTAMP_END columns
way3_2018_data <- cbind(TIMESTAMP_START = NA, TIMESTAMP_END = NA, way3_2018_data)
# Convert TIMESTAMP column to POSIXct format (1/1/2018  12:00:00 AM)
way3_2018_data$TIMESTAMP <- ymd_hms(way3_2018_data$TIMESTAMP)
# Create TIMESTAMP_START in the desired format
way3_2018_data$TIMESTAMP_START <- format(way3_2018_data$TIMESTAMP, "%Y%m%d%H%M")
# Create TIMESTAMP_END by adding 30 minutes to TIMESTAMP and formatting it
way3_2018_data$TIMESTAMP_END <- format(way3_2018_data$TIMESTAMP + minutes(30), "%Y%m%d%H%M")
# Convert TIMESTAMP_START and TIMESTAMP_END to character type
way3_2018_data$TIMESTAMP_START <- as.character(way3_2018_data$TIMESTAMP_START)
way3_2018_data$TIMESTAMP_END <- as.character(way3_2018_data$TIMESTAMP_END)
# Create a new column 'HOUR' to store the hour extracted from the TIMESTAMP
way3_2018_data$HOUR <- hour(way3_2018_data$TIMESTAMP)
# Create a new column 'MONTH' to store the month extracted from the TIMESTAMP
way3_2018_data$MONTH <- month(way3_2018_data$TIMESTAMP)
# Create a new column 'DAY_OF_YEAR' to store the day of the year extracted from the TIMESTAMP
way3_2018_data$DOY <- yday(way3_2018_data$TIMESTAMP)
# Replace NaN and NA values with -9999
way3_2018_data[is.na(way3_2018_data)] <- -9999
# Define custom function to handle NaN values in data frames
is.nan.data.frame <- function(x) {
do.call(cbind, lapply(x, is.nan))
}
# Replace NaN with -9999
way3_2018_data[is.nan.data.frame(way3_2018_data)] <- -9999
# Assuming way3_2018_data is your dataset
print(way3_2018_data[1:4, 1:4])
library(ggplot2)
library(viridis)
ggplot(way3_2018_data, aes(x = HOUR, y = SW_IN_Avg, color = (DOY))) +
geom_point() +
scale_color_viridis_c() +
labs(title = "SW_IN_Avg vs HOUR",
x = "Hour of the Day",
y = "SW_IN_Avg",
color = "Day of the Year") +
theme_minimal()
# Assuming way3_2018_data is your DataFrame
way3_2018_data <- way3_2018_data.rename(
columns = c(
# TIMESTAMP remains the same (remove this line if you want to rename it)
# TIMESTAMP = TIMESTAMP,
#"created from TIMESTAMP" = "TIMESTAMP_START",
"x_70%" = "FETCH_70",
#NF = "FETCH_80",
"x_90%" = "FETCH_90",
#NF = "FETCH_FILTER",  # Duplicate NF keys are ignored
#NF = "FETCH_MAX",    # Duplicate NF keys are ignored
ch4_mole_fraction = "CH4",
ch4_mixing_ratio = "CH4_MIXING_RATIO",
co2_mole_fraction = "CO2",
co2_mixing_ratio = "CO2_MIXING_RATIO",
co2_flux = "FC",
ch4_flux = "FCH4",
h2o_mole_fraction = "H2O",
h2o_mixing_ratio = "H2O_MIXING_RATIO",
h2o_flux = "FH2O",
#"shf_Avg.1./shf_Avg.2./shf_Avg.3." = "G",
H = "H",
LE = "LE",
NF = "SG",  # Duplicate NF keys are ignored
H_strg = "SH",
LE_strg = "SLE",
air_pressure = "PA",
RH = "RH",
"3sonic_temperature" = "T_SONIC",
#NF = "T_SONIC_SIGMA",  # Duplicate NF keys are ignored
#"Needs to be derived" = "GPP",  # Duplicate "Needs to be derived" are ignored
#"Needs to be derived" = "NEE",  # Duplicate "Needs to be derived" are ignored
"Needs to be derived" = "RECO",  # Duplicate "Needs to be derived" are ignored
qc_co2_flux = "FC_SSITC_TEST",
qc_ch4_flux = "FCH4_SSITC_TEST",
qc_H = "H_SSITC_TEST",
qc_LE = "LE_SSITC_TEST",
qc_Tau = "TAU_SSITC_TEST",
co2_var = "CO2_SIGMA",
co2_strg = "SC",
ch4_strg = "SCH4",
u_var = "U_SIGMA",
v_var = "V_SIGMA",
w_var = "W_SIGMA",
wind_dir = "WD",
NF = "WD_SIGMA",  # Duplicate NF keys are ignored
wind_speed = "WS",
max_wind_speed = "WS_MAX",
X_z_d__L = "ZL",
air_temperature = "TA",
VPD = "VPD",
NF = "P",  # Duplicate NF keys are ignored
LW_IN_Avg = "LW_IN",
LW_OUT_Avg = "LW_OUT",
PAR_IN_Avg = "PPFD_IN",
PAR_OUT_Avg = "PPFD_OUT",
SW_IN_Avg = "SW_IN",
SW_OUT_Avg = "SW_OUT",
SWC_1_1_1 = "SWC",
#TS_2_1_2/TS_2_2_2 = "TS",
#WTD_Avg/Lvl_m_Avg = "WTD",
L = "MO_LENGTH",
Tau = "TAU",
#u*/u_ = "USTAR"
)
)
# Assuming way3_2018_data is your DataFrame
way3_2018_data <- way3_2018_data.rename(
columns = c(
# TIMESTAMP remains the same (remove this line if you want to rename it)
# TIMESTAMP = TIMESTAMP,
#"created from TIMESTAMP" = "TIMESTAMP_START",
"x_70_" = "FETCH_70",
#NF = "FETCH_80",
"x_90_" = "FETCH_90",
#NF = "FETCH_FILTER",  # Duplicate NF keys are ignored
#NF = "FETCH_MAX",    # Duplicate NF keys are ignored
ch4_mole_fraction = "CH4",
ch4_mixing_ratio = "CH4_MIXING_RATIO",
co2_mole_fraction = "CO2",
co2_mixing_ratio = "CO2_MIXING_RATIO",
co2_flux = "FC",
ch4_flux = "FCH4",
h2o_mole_fraction = "H2O",
h2o_mixing_ratio = "H2O_MIXING_RATIO",
h2o_flux = "FH2O",
#"shf_Avg.1./shf_Avg.2./shf_Avg.3." = "G",
H = "H",
LE = "LE",
NF = "SG",  # Duplicate NF keys are ignored
H_strg = "SH",
LE_strg = "SLE",
air_pressure = "PA",
RH = "RH",
"3sonic_temperature" = "T_SONIC",
#NF = "T_SONIC_SIGMA",  # Duplicate NF keys are ignored
#"Needs to be derived" = "GPP",  # Duplicate "Needs to be derived" are ignored
#"Needs to be derived" = "NEE",  # Duplicate "Needs to be derived" are ignored
"Needs to be derived" = "RECO",  # Duplicate "Needs to be derived" are ignored
qc_co2_flux = "FC_SSITC_TEST",
qc_ch4_flux = "FCH4_SSITC_TEST",
qc_H = "H_SSITC_TEST",
qc_LE = "LE_SSITC_TEST",
qc_Tau = "TAU_SSITC_TEST",
co2_var = "CO2_SIGMA",
co2_strg = "SC",
ch4_strg = "SCH4",
u_var = "U_SIGMA",
v_var = "V_SIGMA",
w_var = "W_SIGMA",
wind_dir = "WD",
NF = "WD_SIGMA",  # Duplicate NF keys are ignored
wind_speed = "WS",
max_wind_speed = "WS_MAX",
X_z_d__L = "ZL",
air_temperature = "TA",
VPD = "VPD",
NF = "P",  # Duplicate NF keys are ignored
LW_IN_Avg = "LW_IN",
LW_OUT_Avg = "LW_OUT",
PAR_IN_Avg = "PPFD_IN",
PAR_OUT_Avg = "PPFD_OUT",
SW_IN_Avg = "SW_IN",
SW_OUT_Avg = "SW_OUT",
SWC_1_1_1 = "SWC",
#TS_2_1_2/TS_2_2_2 = "TS",
#WTD_Avg/Lvl_m_Avg = "WTD",
L = "MO_LENGTH",
Tau = "TAU",
#u*/u_ = "USTAR"
)
)
# Assuming way3_2018_data is your DataFrame
way3_2018_data <- way3_2018_data.rename(
columns = c(
# TIMESTAMP remains the same (remove this line if you want to rename it)
# TIMESTAMP = TIMESTAMP,
#"created from TIMESTAMP" = "TIMESTAMP_START",
"x_70_" = "FETCH_70",
#NF = "FETCH_80",
"x_90_" = "FETCH_90",
#NF = "FETCH_FILTER",  # Duplicate NF keys are ignored
#NF = "FETCH_MAX",    # Duplicate NF keys are ignored
ch4_mole_fraction = "CH4",
ch4_mixing_ratio = "CH4_MIXING_RATIO",
co2_mole_fraction = "CO2",
co2_mixing_ratio = "CO2_MIXING_RATIO",
co2_flux = "FC",
ch4_flux = "FCH4",
h2o_mole_fraction = "H2O",
h2o_mixing_ratio = "H2O_MIXING_RATIO",
h2o_flux = "FH2O",
#"shf_Avg.1./shf_Avg.2./shf_Avg.3." = "G",
H = "H",
LE = "LE",
NF = "SG",  # Duplicate NF keys are ignored
H_strg = "SH",
LE_strg = "SLE",
air_pressure = "PA",
RH = "RH",
"3sonic_temperature" = "T_SONIC",
#NF = "T_SONIC_SIGMA",  # Duplicate NF keys are ignored
#"Needs to be derived" = "GPP",  # Duplicate "Needs to be derived" are ignored
#"Needs to be derived" = "NEE",  # Duplicate "Needs to be derived" are ignored
"Needs to be derived" = "RECO",  # Duplicate "Needs to be derived" are ignored
qc_co2_flux = "FC_SSITC_TEST",
qc_ch4_flux = "FCH4_SSITC_TEST",
qc_H = "H_SSITC_TEST",
qc_LE = "LE_SSITC_TEST",
qc_Tau = "TAU_SSITC_TEST",
co2_var = "CO2_SIGMA",
co2_strg = "SC",
ch4_strg = "SCH4",
u_var = "U_SIGMA",
v_var = "V_SIGMA",
w_var = "W_SIGMA",
wind_dir = "WD",
NF = "WD_SIGMA",  # Duplicate NF keys are ignored
wind_speed = "WS",
max_wind_speed = "WS_MAX",
X_z_d__L = "ZL",
air_temperature = "TA",
VPD = "VPD",
NF = "P",  # Duplicate NF keys are ignored
LW_IN_Avg = "LW_IN",
LW_OUT_Avg = "LW_OUT",
PAR_IN_Avg = "PPFD_IN",
PAR_OUT_Avg = "PPFD_OUT",
SW_IN_Avg = "SW_IN",
SW_OUT_Avg = "SW_OUT",
SWC_1_1_1 = "SWC",
#TS_2_1_2/TS_2_2_2 = "TS",
#WTD_Avg/Lvl_m_Avg = "WTD",
L = "MO_LENGTH",
Tau = "TAU",
#u*/u_ = "USTAR"
)
)
